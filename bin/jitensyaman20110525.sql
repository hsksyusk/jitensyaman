
/* Drop Indexes */

DROP INDEX TWITTER_USER_ID ON JITENSYAMANTRACKSUSER;
DROP INDEX TWITTER_USER ON JITENSYAMANTRACKSUSER;



/* Drop Tables */

DROP TABLE JITENSYAMANTRACKS;
DROP TABLE JITENSYAMANTRACKSTOTAL;
DROP TABLE JITENSYAMANTRACKSUSER;




/* Create Tables */

CREATE TABLE JITENSYAMANTRACKS
(
	ID INT NOT NULL AUTO_INCREMENT,
	ID_FIELD INT NOT NULL,
	DATE DATE NOT NULL,
	CREATE_DATE DATETIME NOT NULL,
	UPDATE_DATE DATETIME NOT NULL,
	DISTANCE FLOAT,
	TIME TIME,
	ELEVATION FLOAT,
	SPEED FLOAT,
	SPEEDMAX FLOAT,
	CADENCE INT,
	CADENCEMAX INT,
	POWER INT,
	POWERMAX INT,
	HEARTRATE INT,
	HEARTRATEMAX INT,
	CALORIE INT,
	PRIMARY KEY (ID)
);


CREATE TABLE JITENSYAMANTRACKSTOTAL
(
	ID INT NOT NULL AUTO_INCREMENT,
	ID_FIELD INT NOT NULL,
	CREATE_DATE DATETIME NOT NULL,
	UPDATE_DATE DATETIME NOT NULL,
	LIFE BOOL,
	YEAR INT,
	MONTH INT,
	DISTANCE FLOAT,
	TIME TIME,
	ELEVATION FLOAT,
	SPEED FLOAT,
	SPEEDMAX FLOAT,
	CADENCE INT,
	CADENCEMAX INT,
	POWER INT,
	POWERMAX INT,
	HEARTRATE INT,
	HEARTRATEMAX INT,
	CALORIE INT,
	PRIMARY KEY (ID)
);


CREATE TABLE JITENSYAMANTRACKSUSER
(
	ID_FIELD INT NOT NULL AUTO_INCREMENT,
	TWITTER_USER_ID INT NOT NULL UNIQUE,
	TWITTER_USER VARCHAR(255),
	TWITTER_ACCESS_TOKEN VARCHAR(255),
	TWITTER_ACCESS_TOKEN_SECRET VARCHAR(255),
	PRIMARY KEY (ID_FIELD)
);



/* Create Foreign Keys */

ALTER TABLE JITENSYAMANTRACKS
	ADD FOREIGN KEY (ID_FIELD)
	REFERENCES JITENSYAMANTRACKSUSER (ID_FIELD)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE JITENSYAMANTRACKSTOTAL
	ADD FOREIGN KEY (ID_FIELD)
	REFERENCES JITENSYAMANTRACKSUSER (ID_FIELD)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;



/* Create Indexes */

CREATE UNIQUE INDEX TWITTER_USER_ID ON JITENSYAMANTRACKSUSER (TWITTER_USER_ID ASC);
CREATE INDEX TWITTER_USER ON JITENSYAMANTRACKSUSER (TWITTER_USER ASC);



